
<link href='http://fonts.googleapis.com/css?family=Roboto+Condensed:400italic,400,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Gentium+Basic:400,700,400italic' rel='stylesheet' type='text/css'>

<style type="text/css">
	body {font-size:100%;}
	h1, h2, h3, h4, h5 {font-family: 'roboto Condensed', san-serif}
	p, a, li {font-family: 'gentium basic', 'serif'}



	#rt-contain {width:100%; max-width: 890px;position:relative;}
	
	#rt-main {display:block;}
		.rt-voice {width:100%;min-height:100px;background:#e9f0df;cursor:pointer;margin:0;clear:both;float:none;}
		.rt-voice:hover {background:#dde8ce;}
			.rt-voice img {display: block;padding:25px 10px 10px 10px;width:50px;height:50px;float:left;}
			.rt-voice h2 {font-size:1em;margin-bottom:0;color:#333;padding-top: 21px;}
			.rt-voice h4 {font-size:.9em;color:#97918f;margin-top:0;font-weight:400;}
		
			

	#rt-segs {display:none;position:absolute;top:0;left:0;width:100%;float:none;}	
		.rt-seg {display:none;position: absolute;top:0;left:0;}
			.rt-seg .rt-voice {float:none;clear:both;margin:0;background:#dde8ce;}
			.rt-seg-content {clear:both;padding:10px 0;}
				.rt-seg-content h2 {}
				.rt-seg-content p {font-size: 1em;margin: 1.5em 0;line-height: 1.5;}



	@media screen and (min-width:768px){
		.rt-voice {width:40%;margin:20px;clear:none;}
		.rt-seg .rt-voice {float:left;margin:20px 20px 20px 20px;background:#dde8ce;}
		#rt-main .rt-voice:nth-of-type(odd) {float:left;}
		#rt-main .rt-voice:nth-of-type(even) {float:right;}
			.rt-voice img {padding:5px 10px 10px 10px;}
			.rt-voice h2 {padding:0;}

		#rt-segs {width:70%;float:left;}

		#rt-nav {width:25%;float:right;border-left: 1px #ddd solid;padding-left: 3%;display:none;margin-top: 150px}
			#rt-nav .rt-voice {width:85%;}
			#rt-nav .rt-voice img {padding:25px 10px 10px 10px;}
			#rt-nav .rt-voice h2 {padding-top:8px;}
	}


</style>

<div id="rt-contain">
	<div id="rt-main"></div>
	<div id="rt-segs"></div>
	<div id="rt-nav"></div>
</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script type="text/javascript">

/* GLOBALS
=======================================*/
var thisApp = {
	data: [],
	voiceBox: '<div class="rt-voice" voice=""><div><img src=""><h2></h2><h4></h4></div><div><p></p></div></div>',
	segBox: '<div class="rt-seg"><div class="rt-seg-voice"></div><div class="rt-seg-content"><h2></h2></div></div>',
	total: 0,
	populateSegs:function(total){
		var ii = 1;
		for (var i = 0 ; i < total-1 ; i++){
			$('#rt-segs').append(this.segBox);
			$('.rt-seg:eq('+i+') .rt-seg-voice').append(this.voiceBox);
			/* Ready segs */
			$('.rt-seg:eq('+i+')').attr('voice', ii);
			$('.rt-seg:eq('+i+') .rt-seg-content h2').text(thisApp.data[ii][4]);

			var split = thisApp.data[ii][5];
			split = split.split('|');

			for (var j = 0 ; j < split.length ; j++){
				$('.rt-seg:eq('+i+') .rt-seg-content').append('<p>' + split[j] + '</p>');
			}
			ii += 1;
		}
	},
	populateBoxes: function(total){
		var ii = 0;
		for (var i = 1 ; i < total ; i++){
			$('#rt-main .rt-voice:eq('+ii+')').attr('voice', i).on('click', function(){
				var thisVoice = $(this).attr('voice');
				$('#rt-main').animate({'opacity':'0'}, 1000, function(){$('#rt-main').remove();});
				$('#rt-segs').add('.rt-seg[voice='+thisVoice+']').fadeIn(1000, function(){
					$('#rt-nav').fadeIn(200);
				});
			});

			$('#rt-nav .rt-voice:eq('+ii+')').on('click', function(){
				var thisVoice = $(this).attr('voice');
				$('.rt-seg:not(.rt-seg[voice='+thisVoice+'])').fadeOut(1);
				$('.rt-seg[voice='+thisVoice+']').fadeIn(500);
			})

			$('#rt-main .rt-voice:eq('+ii+') img').add('#rt-nav .rt-voice:eq('+ii+') img').add('#rt-segs .rt-voice:eq('+ii+') img').attr('src', thisApp.data[i][3]);
			$('#rt-main .rt-voice:eq('+ii+') h2').add('#rt-nav .rt-voice:eq('+ii+') h2').add('#rt-segs .rt-voice:eq('+ii+') h2').text(thisApp.data[i][0]);
			$('#rt-main .rt-voice:eq('+ii+') h4').add('#rt-nav .rt-voice:eq('+ii+') h4').add('#rt-segs .rt-voice:eq('+ii+') h4').text(thisApp.data[i][1]);
			ii += 1;
		}
	},
	populateNav: function(total){
		var ii = 0;
		for (var i = 1 ; i < total ; i++){
			$('#rt-nav').append(this.voiceBox);
			$('#rt-nav .rt-voice:eq('+ii+')').attr('voice', i);
			ii += 1;
		}
	},
	createApp: function(){
		$.getJSON('data.json', function(d){
			thisApp.data = d;
			thisApp.total = thisApp.data.length;
			console.log(thisApp.total)
			for (var i=1 ; i < thisApp.total ; i++){
				$('#rt-main').append(thisApp.voiceBox);			
			}

			thisApp.populateSegs(thisApp.total);
			thisApp.populateNav(thisApp.total);	
			thisApp.populateBoxes(thisApp.total);
			
		});			
	}
}


window.onload = function(){
	thisApp.createApp();
}







































</script>

